<mn-header>
  <mn-breadcrumb>
    <span class="hide-for-small">Monitoring  &#62; </span>Chart Builder
  </mn-breadcrumb>
  <mn-controls>
    <a href="#">MANAGE</a>
    <a href="#" class="link-add">+ ADD</a>
  </mn-controls>
</mn-header>

<main>
  <mn-nav></mn-nav>
  <div
     uib-alert
     ng-repeat="alert in overviewCtl.alerts"
     type="{{alert.type}}"
     close="overviewCtl.closeAlert($index)"
     dismiss-on-timeout="{{alert.timeout}}">{{alert.msg}}</div>
  <div>
    <div
       ng-show="adminCtl.lostConnState.isActivated">
      Difficulties communicating with the cluster; displaying cached information!
    </div>

    <div mn-spinner="!overviewCtl.mnOverviewConfig.ramOverviewConfig">
      <div>RAM Overview for Data Nodes</div>
      <div
         mn-bar-usage
         base-info="overviewCtl.mnOverviewConfig.ramOverviewConfig"></div>
    </div>

    <div mn-spinner="!overviewCtl.mnOverviewConfig.hddOverviewConfig">
      <div>Disk Overview for Data Nodes</div>
      <div
         mn-bar-usage
         base-info="overviewCtl.mnOverviewConfig.hddOverviewConfig"></div>
    </div>

    <div ng-if="rbac.cluster.bucket['*'].stats.read">
      <div
         ng-show="adminCtl.lostConnState.isActivated">
        Difficulties communicating with the cluster; displaying cached information!
      </div>
      <h2>
        Buckets ({{overviewCtl.buckets.length || '0'}} active)
      </h2>

      <div
         ng-show="overviewCtl.buckets.length"
         mn-spinner="!overviewCtl.mnOverviewStats.opsGraphConfig">
        <div>Operations per second</div>
        <div
           mn-plot
           mn-plot-config="overviewCtl.mnOverviewStats.opsGraphConfig"
           style="height: 100px"></div>
      </div>

      <div
         ng-show="overviewCtl.buckets.length"
         mn-spinner="!overviewCtl.mnOverviewStats.readsGraphConfig">
        <div>Disk fetches per second</div>
        <div
           mn-plot
           mn-plot-config="overviewCtl.mnOverviewStats.readsGraphConfig"
           style="height: 100px"></div>
      </div>

      <div ng-show="!overviewCtl.buckets.length">
        No buckets currently defined! Go to <a ui-sref="app.admin.buckets">Manage Buckets</a> to create some.
      </div>
    </div>

    <div
       ng-show="adminCtl.lostConnState.isActivated">Difficulties communicating with the cluster; displaying cached information!
    </div>

    <h2>
      Servers ({{overviewCtl.nodes.active.length || '0'}} active)
    </h2>
    <a
       ui-sref="app.admin.servers.list({list: 'pending'})"
       ng-show="overviewCtl.nodes.failedOver.length">
      Servers Failed Over: {{overviewCtl.nodes.failedOver.length}}
    </a>
    <span ng-show="!overviewCtl.nodes.failedOver.length">Servers Failed Over: 0</span>
    <a
       ui-sref="app.admin.servers.list"
       ng-show="overviewCtl.nodes.down.length">
      Servers Down: {{overviewCtl.nodes.down.length}}
    </a>
    <span ng-show="!overviewCtl.nodes.down.length">Servers Down: 0</span>
    <a
       ui-sref="app.admin.servers.list({list: 'pending'})"
       ng-show="overviewCtl.nodes.pending.length">
      Servers Pending Rebalance: {{overviewCtl.nodes.pending.length}}
    </a>
    <span ng-show="!overviewCtl.nodes.pending.length">Servers Pending Rebalance: 0</span>
  </div>
</main>

